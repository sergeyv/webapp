<%page args="field" />

<select id="${field.cssname}" name="${field.name}">
%for option in field.widget.get_options(field):
  <option value="${option[0]}" ${field.widget.selected(option,field)|n}>${option[1]}</option>
%endfor
</select>

<script type="text/javascript">
    (function() {
        var adjust_visibility = function() {
            var formName = "${field.cssname.rpartition('-')[0]}",
                to_show = $("#${field.cssname}").val();

            %for option in field.widget.get_options(field):
               $("#"+formName+"-${option[0]}--field").hide();
            %endfor

            $("#"+formName+"-"+to_show+"--field").show();
        };

        $("select#${field.cssname}").change(function() {
            adjust_visibility();
        });
        adjust_visibility();
    }());

</script>
